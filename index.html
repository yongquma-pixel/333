<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è·¯åŒºé€š - æé€Ÿçº¯å‡€ç‰ˆ</title>
    <style>
        /* è¿™é‡Œå†™æœ€åŸºç¡€çš„ CSSï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“ */
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
        }
        /* é¡¶éƒ¨å¯¼èˆª */
        .header {
            background-color: #2563eb;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        /* åº•éƒ¨å¯¼èˆªæ  */
        .tab-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: white;
            display: flex;
            border-top: 1px solid #ddd;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .tab-btn {
            flex: 1;
            padding: 15px;
            text-align: center;
            font-size: 14px;
            color: #888;
            background: none;
            border: none;
            cursor: pointer;
        }
        .tab-btn.active {
            color: #2563eb;
            font-weight: bold;
            background-color: #f8faff;
        }
        /* é¡µé¢å†…å®¹åŒºåŸŸ */
        .page {
            display: none; /* é»˜è®¤éšè—æ‰€æœ‰é¡µé¢ */
            padding: 20px;
            padding-bottom: 80px; /* ç»™åº•éƒ¨å¯¼èˆªç•™ä½ç½® */
            min-height: 80vh;
        }
        .page.active {
            display: block; /* æ¿€æ´»çš„é¡µé¢æ˜¾ç¤º */
        }
        
        /* è¡¨å•å’Œåˆ—è¡¨æ ·å¼ */
        .input-group { margin-bottom: 15px; }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
        }
        input:focus { border-color: #2563eb; }
        button.btn-primary {
            width: 100%;
            padding: 12px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
        }
        .card {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card .title { font-size: 16px; font-weight: bold; }
        .card .tag { 
            background: #eff6ff; 
            color: #2563eb; 
            padding: 4px 8px; 
            border-radius: 4px; 
            font-size: 14px; 
            font-weight: bold;
        }
        .empty-tip { text-align: center; color: #999; margin-top: 50px; }
        .delete-btn { color: #ff4d4f; border: none; background: none; padding: 5px; margin-left: 10px; }
    </style>
</head>
<body>

    <div class="header">ğŸ“¦ è·¯åŒºé€š (çº¯å‡€ç‰ˆ)</div>

    <div id="page-search" class="page active">
        <div class="input-group">
            <input type="text" id="search-input" placeholder="ğŸ” è¾“å…¥è·¯åæŸ¥è¯¢..." oninput="handleSearch()">
        </div>
        <div id="search-results">
            <div class="empty-tip">ğŸ‘‡ åœ¨ä¸Šæ–¹è¾“å…¥è·¯åå¼€å§‹æœç´¢</div>
        </div>
    </div>

    <div id="page-manage" class="page">
        <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <h3 style="margin-top:0">â• æ·»åŠ æ–°è·¯åŒº</h3>
            <div class="input-group">
                <input type="text" id="add-name" placeholder="è¡—é“ / å°åŒºåç§°">
            </div>
            <div class="input-group">
                <input type="text" id="add-area" placeholder="æ‰€å±è·¯åŒº (å¦‚ A-01)">
            </div>
            <button class="btn-primary" onclick="addStreet()">ä¿å­˜</button>
        </div>

        <h3 style="color:#666; font-size: 14px;">ğŸ“š æ‰€æœ‰æ•°æ® (<span id="total-count">0</span>)</h3>
        <div id="manage-list">
            </div>
    </div>

    <div class="tab-bar">
        <button class="tab-btn active" onclick="switchTab('search', this)">ğŸ” æŸ¥è·¯åŒº</button>
        <button class="tab-btn" onclick="switchTab('manage', this)">âš™ï¸ ç®¡ç†</button>
    </div>

    <script>
        // --- æ ¸å¿ƒé€»è¾‘ (çº¯ JavaScript) ---

        // 1. æ•°æ®å­˜å‚¨ key
        const STORAGE_KEY = 'courier_data_v1';

        // 2. è·å–æ‰€æœ‰æ•°æ®
        function getData() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
        }

        // 3. ä¿å­˜æ•°æ®
        function saveData(list) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
            renderManageList(); // åˆ·æ–°ç®¡ç†åˆ—è¡¨
            updateCount();
        }

        // 4. æ·»åŠ è·¯åŒº
        function addStreet() {
            const nameInput = document.getElementById('add-name');
            const areaInput = document.getElementById('add-area');
            const name = nameInput.value.trim();
            const area = areaInput.value.trim();

            if (!name || !area) {
                alert('è¯·å¡«å†™å®Œæ•´ï¼');
                return;
            }

            const list = getData();
            // æ·»åŠ åˆ°æ•°ç»„å¼€å¤´
            list.unshift({ id: Date.now(), name: name, area: area });
            saveData(list);

            // æ¸…ç©ºè¾“å…¥æ¡†
            nameInput.value = '';
            areaInput.value = '';
            alert('ä¿å­˜æˆåŠŸï¼');
        }

        // 5. åˆ é™¤è·¯åŒº
        function deleteStreet(id) {
            if (!confirm('ç¡®å®šåˆ é™¤è¿™æ¡å—ï¼Ÿ')) return;
            let list = getData();
            list = list.filter(item => item.id !== id);
            saveData(list);
            handleSearch(); // å¦‚æœæ­£åœ¨æœç´¢ï¼Œä¹Ÿè¦åˆ·æ–°æœç´¢ç»“æœ
        }

        // 6. æ¸²æŸ“ç®¡ç†åˆ—è¡¨
        function renderManageList() {
            const list = getData();
            const container = document.getElementById('manage-list');
            if (list.length === 0) {
                container.innerHTML = '<div class="empty-tip">æš‚æ— æ•°æ®ï¼Œè¯·ä¸Šæ–¹æ·»åŠ </div>';
                return;
            }
            container.innerHTML = list.map(item => `
                <div class="card">
                    <div>
                        <div class="title">${item.name}</div>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tag">${item.area}</span>
                        <button class="delete-btn" onclick="deleteStreet(${item.id})">âœ•</button>
                    </div>
                </div>
            `).join('');
        }

        // 7. å¤„ç†æœç´¢
        function handleSearch() {
            const keyword = document.getElementById('search-input').value.trim().toLowerCase();
            const container = document.getElementById('search-results');
            
            if (!keyword) {
                container.innerHTML = '<div class="empty-tip">ğŸ‘‡ åœ¨ä¸Šæ–¹è¾“å…¥è·¯åå¼€å§‹æœç´¢</div>';
                return;
            }

            const list = getData();
            const results = list.filter(item => 
                item.name.toLowerCase().includes(keyword) || 
                item.area.toLowerCase().includes(keyword)
            );

            if (results.length === 0) {
                container.innerHTML = '<div class="empty-tip">æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</div>';
                return;
            }

            container.innerHTML = results.map(item => `
                <div class="card">
                    <div class="title">${item.name}</div>
                    <span class="tag" style="font-size: 18px;">${item.area}</span>
                </div>
            `).join('');
        }

        // 8. åˆ‡æ¢é¡µé¢ (Tab)
        function switchTab(pageId, btn) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
            // å–æ¶ˆæ‰€æœ‰æŒ‰é’®é«˜äº®
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById('page-' + pageId).classList.add('active');
            // é«˜äº®ç›®æ ‡æŒ‰é’®
            btn.classList.add('active');

            // å¦‚æœåˆ‡æ¢åˆ°ç®¡ç†é¡µï¼Œåˆ·æ–°ä¸€ä¸‹åˆ—è¡¨
            if(pageId === 'manage') {
                renderManageList();
                updateCount();
            }
        }

        function updateCount() {
            document.getElementById('total-count').innerText = getData().length;
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            renderManageList();
            updateCount();
        }
    </script>
</body>
</html>
